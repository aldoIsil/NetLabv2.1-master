@model NetLab.Models.OpcionesAnalitoViewModels
@using NetLab.Helpers;
@using System.Web.Mvc.Html;



    @*@helper GetHtml(List<Model.AnalitoOpcionResultado> OpcionesList)
    {*@
    <table class="table">
        @{
                        int currentID = 0;
                        int rowIndex = 0;
                        string parentId = ViewBag.IdParent;
                        foreach (var i in Model.Opciones.Where(a => a.IdAnalitoOpcionParent.Trim().Equals(parentId)))
                        {
                            if (i.IdAnalitoOpcionResultado == currentID)
                            {
                                continue;
                            }
                            else
                            {
                                if (rowIndex == 0)
                                {
                        <thead>
                            <tr>
                                <th>Orden</th>
                                <th>Glosa</th>
                                <th>Estado</th>
                                <th>Opcion Resultados</th>
                                <th>Editar / Eliminar</th>
                            </tr>
                        </thead>
                                }
                                rowIndex++;
                                currentID = i.IdAnalitoOpcionResultado;
                                var Opciones = Model.Opciones.Where(a => a.IdAnalitoOpcionParent.Trim().Equals(i.IdAnalito.ToString().ToUpper())).ToList();
                                var newOpcionesList = Model.Opciones.Where(a => !a.IdAnalitoOpcionParent.Equals(i.IdAnalito.ToString().ToUpper())).ToList();
                    <tbody>
                        <tr>
                            <td>
                                @if (Opciones.Count > 0)
                                            {
                                    <span class="icon icon-e" style="float:left; cursor:pointer;"></span>
                                }
                                else
                                {
                                    <span style="display:inline-block;width:14px">&nbsp;</span>
                                }
                                @i.Orden
                            </td>
                            <td>@i.Glosa</td>
                            <td>@i.Estado</td>
                            <td>
                                <input type="button" id="btnAdd" class="buton" />
                            </td>

                            <td class="text-center">
                                <input type="button" id="btnEdit" class="buton" />
                            </td>

                        </tr>
                        <tr style="display:none;">
                            @if (Opciones.Count > 0)
                            {
                                <td colspan="4" class="innerTable">
                                    @*@Html.Action("DetalleOpciones", new { NewOpcionesList = newOpcionesList.ToList().AsEnumerable(), parentID = i.IdAnalitoOpcionResultado.ToString() })*@
                                </td>
                            }
                            else
                            {
                                <td colspan="4"></td>
                            }
                        </tr>
                    </tbody>
                }
            }
        }
    </table>
@*//}*@
